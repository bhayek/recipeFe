{"ast":null,"code":"var _jsxFileName = \"/Users/bryan/code/yumTum/FE/recipie-app/src/components/common/Form.jsx\";\nimport React, { Component } from 'react';\nimport Input from './Input';\nimport Joi from 'joi-browser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Form extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {},\n      errors: {}\n    };\n\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n      const {\n        error\n      } = Joi.validate(this.state.data, this.schema, options);\n      if (!error) return null;\n      const errors = {};\n\n      for (let item of error.details) errors[item.path[0]] = item.message;\n\n      return errors;\n    };\n\n    this.validateProperty = _ref => {\n      let {\n        name,\n        value\n      } = _ref;\n      const obj = {\n        [name]: value\n      };\n      const schema = {\n        [name]: this.schema[name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.handleChange = _ref2 => {\n      let {\n        currentTarget: input\n      } = _ref2;\n      const errors = { ...this.state.errors\n      };\n      const errorMessage = this.validateProperty(input);\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n      const data = { ...this.state.data\n      };\n      data[input.name] = input.value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n  }\n\n  renderInput(name, label, helpText) {\n    const {\n      data,\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Input, {\n      name: name,\n      label: label,\n      type: name,\n      value: data[name],\n      onChange: this.handleChange,\n      helpText: helpText,\n      error: errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButton(label) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: this.validate(),\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default Form;","map":{"version":3,"names":["React","Component","Input","Joi","Form","state","data","errors","validate","options","abortEarly","error","schema","item","details","path","message","validateProperty","name","value","obj","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","currentTarget","input","errorMessage","renderInput","label","helpText","renderButton"],"sources":["/Users/bryan/code/yumTum/FE/recipie-app/src/components/common/Form.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Input from './Input'\nimport Joi from 'joi-browser';\n\nclass Form extends Component {\n    state = { \n        data: {},\n        errors: {}\n     } \n\n    validate = () => {\n        const options = { abortEarly: false}\n        const { error } = Joi.validate(this.state.data, this.schema, options);\n        if (!error) return null;\n\n        const errors = {};\n        for (let item of error.details) errors[item.path[0]] = item.message;\n        return errors;\n    };\n\n    validateProperty = ({ name, value }) => {\n        const obj = { [name]: value };\n        const schema = { [name]: this.schema[name]}\n        const { error } = Joi.validate(obj, schema)\n        return error ? error.details[0].message : null;\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        const errors = this.validate();\n        this.setState({ errors: errors || {} });\n        if (errors) return;\n\n        this.doSubmit()\n    };\n\n    handleChange = ({ currentTarget: input }) => {\n        const errors = {...this.state.errors}\n        const errorMessage = this.validateProperty(input);\n        if (errorMessage) errors[input.name] = errorMessage;\n        else delete errors[input.name];\n\n        const data = {...this.state.data}\n        data[input.name] = input.value;\n        this.setState({ data, errors })\n    }\n\n    renderInput(name, label, helpText) {\n        const { data, errors } = this.state\n        return <Input \n        name={name} \n        label={label}\n        type={name}\n        value={data[name]} \n        onChange={this.handleChange} \n        helpText={helpText}\n        error={errors[name]} \n    />\n    }\n\n    renderButton(label) {\n        return  <button \n        disabled={this.validate()}\n        type=\"submit\" \n        className=\"btn btn-primary\">\n            {label}\n    </button>\n    }\n\n}\n \nexport default Form;"],"mappings":"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"},"metadata":{},"sourceType":"module"}